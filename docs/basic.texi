This chapter describes the basic infrastructure classes in Lucee.

@section @code{Lucee::Array}: Serial arrays.
@cindex serial arrays

@subsection Overview

The @code{Lucee::Array} class provides serial array of arbitrary rank
(dimensions). By default arrays are zero-based but other start indices
can also be specified. Arrays can be created by specifying the shape
and, optionally, the starting index along each rank.

@example
#include <LcArray.h>

unsigned shape[2] = @{5, 10@};
Lucee::Array<2, double> arr1(shape);

int start[2] = @{2, 0@};
Lucee::Array<2, double> arr2(shape, start);
@end example

@noindent
This will create rank-two @math{5\times 10} arrays @code{arr1}, indexed
starting @math{(0,0)}, and @code{arr2}, indexed starting
@math{(2,0)}. One can now loop over the arrays, setting them:

@example
for (int i=arr1.getStart(0); i<arr1.getEnd(0); ++i)
  for (int j=arr1.getStart(1); j<arr1.getEnd(1); ++j)
    arr1(i,j) = i+j;

arr2 = 5.0;
@end example

A common use of arrays in Lucee is to store vector fields. For example,
to store the electric field in a 2D simulation one would create a 3D
array (the final index for the components of the electric field):
@example
unsigned shape[3] = @{16, 32, 3@};
Lucee::Array<3, double> E(shape);
@end example
Although this array can be indexed in the usual way, it is ofter more
convenient to get access to all three components directly:
@example
Lucee::ArrayItr<double> itr = E.createItr();
E.setItr(itr, 3, 4);
itr[0] = 1.0; itr[1] = 2.0; itr[2] = 3.0;
@end example

@subsection Reference

@deftypemethod Lucee::Array unsigned getRank 
Return the rank of the array.
@end deftypemethod

@deftypemethod Lucee::Array void getShape @code{unsigned[NDIM]} shape
On return fill the shape of the array in @code{shape}.
@end deftypemethod

@deftypemethod Lucee::Array @code{unsigned} getShape @code{int} dir
Return the shape of the array in direction @code{dir}.
@end deftypemethod

@deftypemethod Lucee::Array @code{int} getStart @code{int} dir
Return the starting index in direction @code{dir}.
@end deftypemethod

@deftypemethod Lucee::Array @code{int} getEnd @code{int} dir
Return @emph{one past} the last index in direction @code{dir}.
@end deftypemethod

@deftypemethod Lucee::Array @code{T} operator() @code{int} i @code{int} j ...
Access element at @math{(i,j,\ldots)} index location in array.
@end deftypemethod

@deftypemethod Lucee::Array @code{Lucee::Array&} operator= @code{T} val
Set all elements of array to @code{val}.
@end deftypemethod
